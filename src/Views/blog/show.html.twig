{% extends 'layout.html.twig' %}

{% block body %}

    <!--================ Start Single Blog Banner Area =================-->
    <section class="banner_area">
        <div class="banner_inner d-flex align-items-center">
            <div class="container">
                <div class="banner_content text-right">
                    <h1>{% block title post.title %}</h1>
                    <div class="page_link">
                        <a href="{{ path('site.home') }}">Accueil Site</a>
                        <a href="{{ path('blog.home') }}">Blog</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--================ End Single Blog Banner Area =================-->

    <!--================Blog Area =================-->
    <section class="blog_area single-post-area section_gap">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8 posts-list">
                    <div class="single-post row">
                        <div class="col-lg-12">
                            <div class="feature-img">
                                <img class="img-fluid" src="../img/blog/feature-img1.jpg" alt="">
                            </div>
                        </div>
                        <div class="col-lg-4  col-md-4">
                            <div class="blog_info text-right">
                                <ul class="blog_meta list">
                                    <li><a href="#">{{ post.nameAuthor }}<i class="lnr lnr-user"></i></a></li>
                                    <li><a href="#">Modifié le {{ post.updatedAt }}<i class="lnr lnr-calendar-full"></i></a></li>
                                    <li><a href="#">Commenté {{ post.nbrComments }} fois<i class="lnr lnr-bubble"></i></a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-8 col-md-4 blog_details">
                            <h2>{{ post.title }}</h2>
                            <p class="excert text-justify">
                                {{ post.content | nl2br }}
                            </p>
                        </div>
                        <div class="col-lg-12">
                            <div class="quotes text-justify">
                                Cet article vous a plu ? Vous souhaitez laisser un commentaire ?<br>
                                Pour cela vous devez au préalable créer un compte sur mon site qui vous donnera accès
                                au formulaire pour poster votre commentaire en bas de cette page.
                            </div>
                        </div>
                    </div>
                    <div class="comments-area">
                        <h4>Commenté {{ post.nbrComments }} fois</h4>
                        {% for comment in comments %}
                            {% if comment.commentStatus %}
                                <div class="comment-list">
                                    <div class="single-comment justify-content-between d-flex">
                                        <div class="user justify-content-between d-flex">
                                            <div class="desc">
                                                <h5><a href="#">{{ comment.nameAuthor }}</a></h5>
                                                <p class="date">Le {{ comment.commentedAt }}</p>
                                                <p class="comment text-justify">
                                                    {{ comment.content | nl2br }}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                    <div class="comment-form">
                        <h4>Laisser un commentaire</h4>
                        <form action="{{ path('blog.show') }}"
                              method="post" enctype="multipart/form-data" class="form-horizontal">
                            {{ csrf_input() }}
                            <div class="form-group">
                                <label for="content" class="form-control-label">
                                    Votre commentaire sera validé par l'administrateur avant d'être publié.
                                </label>
                                <textarea class="form-control mb-10" rows="5" id="content" name="content"
                                          placeholder="Commentaire..." onfocus="this.placeholder = ''"
                                          onblur="this.placeholder = 'Commentaire...'" required=""></textarea>
                                <small class="form-text text-muted">{{ errors }}</small>
                            </div>
                            <button type="submit" class="primary-btn primary_btn">
                                <span>Commenter</span>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--================Blog Area =================-->

{% endblock %}
